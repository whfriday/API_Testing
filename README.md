<a id="readme-top"></a>

# Автоматизация тестирования API с использованием Python.







<!-- Содержание -->
<details>
  <summary>Содержание</summary>
  <ol>
    <li>
      <a href="#about-the-project">О проекте</a>
      <ul>
        <li><a href="#logic">Логика проекта</a></li>
        <li><a href="#built-with">Используемые библиотеки</a></li>
      </ul>
    </li>
    <li>
      <a href="#contains-project">Основные директории проекта</a>
      <ul>
        <li><a href="#files">Файлы (files)</a></li>
        <li><a href="#tests">Тесты (tests) и Отчёты Allure(test_results)</a></li>
        <li><a href="#util">Утилиты (utils)</a></li>
      </ul>
    </li>
    <li>
      <a href="#getting-started">Перед использованием</a>
      <ul>
        <li><a href="#installation">Установка</a></li>
      </ul>
    </li>
    <li><a href="#usage">Использование</a></li>
    </li>
    <li><a href="#end">Заключение</a></li>
  </ol>
</details>



<!-- О ПРОЕКТЕ -->
## О проекте
<a id="about-the-project"></a>

Проект написан в учебно-тренировочных целях с использованием методологии OOП. Также добавлено логирование тестов и подключены отчёты *Allure*.

Основная задача проекта заключается в создании автоматизированных тестов для проверки корректного функционирования данного API с проверкой корректности получаемых ответов на каждом этапе.

За тестируемый объект была выбрана открытая API [SWAPI](https://swapi.dev/)

***В директориях logs, test_results уже лежат созданные файлы, после успешного прохождения автотеста***

<p align="right">(<a href="#readme-top">Наверх</a>)</p>

### Логика проекта
<a id="logic"></a> 

* Отправка GET-запроса с целью получения информации о каком-либо персонаже(в качестве примера выбран Дарт Вейдер(DV))
* Получение информации о фильмах с его участием
* Отправка GET-запросов по каждому из полученных фильмов
* Получение списка персонажей, участвовавших в каждом фильме
* Отправка GET-запросов по каждому из полученных персонажей
* Сортировка и удаление повторяющихся персонажей
* Запись получившегося массива в текстовый файл
* Контроль статус-кодов ответов и сверка их содержания с ожидаемой
* Создание логов и отчётов Allure


<p align="right">(<a href="#readme-top">Наверх</a>)</p>

### Используемые библиотеки
<a id="built-with"></a>


Проект написан на основе таких библиотек как [Requests](https://requests.readthedocs.io/en/latest/) и [Pytest](https://docs.pytest.org/en/stable/index.html). 
Кроме того ещё используется инструмент для создания отчётов автотестирования - [Allure](https://allurereport.org/).

<img src="https://requests.readthedocs.io/en/latest/_static/requests-sidebar.png" width="200" height="200"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Pytest_logo.svg/900px-Pytest_logo.svg.png" width="200" height="200"> <img src="https://s3.eu-west-1.amazonaws.com/matrix.assets/7d6iut4zjwztrokzur1obe8jkvvw" width="200" height="200">





<p align="right">(<a href="#readme-top">Наверх</a>)</p>

## Основные директории проекта
<a id="contains-project"></a>

### 1. Файлы (files)
<a id="files"></a>

Содержит текстовые файлы, создаваемые и заполняемы в результате исполнения теста.

### 2. Тесты (tests) и Отчёты Allure(test_results)
<a id="tests"></a>

Тестовые функции написаны с использованием Pytest. Тест test_SWAPI проверяет работоспособность данной API используя определённую логику.
В директории */test_results* сохраняются данный для отчётов Allure.


### 3. Утилиты (utils)
<a id="util"></a>

* **api.py**: представляет собой все методы, используемые для построения логики тестирования. Содержит методы для выполнения различных GET-запросов, а также метод, использующий циклы for, необходимый для исполнения логики теста.
* **checking.py**: представляет методы проверки ответов сервера, где осуществляется проверка на статус-код, на наличие обязательных полей и их фактическое содержание.
* **helper_methods.py**: представляет вспомогательные методы для работы проекта, такие как непосредственная отправка запроса посредством библиотеки requests, а также метод записи массива в текстовый файл.
* **logger.py**: метод для создания логгирования тестов, в котором присутствует класс *Logger*, при вызове которого в каждом методе, можно с легкостью отслеживать ход выполнения теста и определять места, в которых тест падает. Сохраняются в директорию */logs*.


<p align="right">(<a href="#readme-top">Наверх</a>)</p>


<!-- Перед использованием -->
## Перед использованием
<a id="getting-started"></a>

Чтобы запустить локальную копию проекта, выполните следующие простые шаги.


### Установка
<a id="installation"></a>

_Ниже приведен пример того, как вы можете клонировать и настроить данный проект. Этот шаблон не зависит от каких-либо внешних зависимостей или сервисов._

1. Клонирование репозитория
   ```sh
   git clone https://github.com/whfriday/AQA_Testing_Selenium.git
   ```
2. Проверьте, чтобы у вас была установлены библиотеки Requests и Pytest.
   ```sh
   pip install requests
   pip install pytest
   ```
3. Проверьте, чтобы у вас был установлен Scoop и Allure. После чего необходимо загрузить плагин *Allure-pytest*.
   ```sh
   pip install allure-pytest
   ```

Об установке Scoop и Allure можно узнать по следующим ссылкам:
* [Scoop](https://scoop.sh/)
* [Allure](https://allurereport.org/docs/install-for-windows/)


<p align="right">(<a href="#readme-top">Наверх</a>)</p>



<!-- Использование -->
## Использование
<a id="usage"></a>

Для запуска теста, необходимо перейти в папку с проектом и ввести следующую команду
 ```sh
   python -m pytest --alluredir=test_results/ tests/test_SWAPI.py
   ```
Посредством которой запускается через pytest необходимый тест, а также создаётся отчёт в директории *test_results_allure/* в теле проекта.

Ход исполнения методов теста можно будет наблюдать в папке */logs/log_current_datetime.log* в теле проекта, в которую сохраняется логгирование теста.


Для просмотра веб-страницы с отчётом Allure необходимо ввести следующую команду, после чего страница автоматически откроется в вашем браузере.
 ```sh
   allure serve test_results/
   ```


<p align="right">(<a href="#readme-top">Наверх</a>)</p>


## Заключение
<a id="end"></a>

Этот проект предоставляет основу для автоматизации тестирования API, обеспечивая удобство и гибкость в написании тестов, а также упрощает поддержку и модернизацию автотестов. Благодаря использованию Requests и Pytest, можно легко создавать наборы тестов, обеспечивая высокое качество и надежность веб-приложения с соответствием всем заявленным требованиям.

<p align="right">(<a href="#readme-top">Наверх</a>)</p>







